<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8">

    <!-- 引入css配置文件 -->
    
<link rel="stylesheet" href="/css/style.css">
 

    
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css">

    
<link rel="stylesheet" href="/lib/prism/prism.css">
 
    <!-- 字体图片集 -->
     
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="yulinliang" type="application/atom+xml">
</head>
<body>
    <div id="main">
        <!-- 引入侧边栏-->

        <div id="content">
            <div class="jumbotron jumbotron-fluid header p-0">
    <div class="article-header-img">
        <div class="cover">

            <!-- 引导栏 -->
            <ul class="nav justify-content-end nav-btn fixed-top" id="navigation-bar">
                
                    
                    
                    <li class="nav-item">
                        <a class="vertical-border-btn" href="/ ">
                            
                                <i class="fa fa-home" aria-hidden="true"></i>
                             
                            <span>主页</span>
                        </a>
                    </li>
                 
            </ul>

            <!-- 文章标题 -->
            <div class="article-title">
                <h1>Hexo主题开发</h1> 
            </div>

             
<div class="article-info text-center">
    <!-- 发表日期 -->
    <span>
      <i class="fa fa-calendar" aria-hidden="true"></i>
      <span>2020-12-27</span>
    </span>
    
    <!-- categories -->
    
      <span class="separator"> | </span>
      <i class="fa fa-inbox" aria-hidden="true"></i>
      <span>
        <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>  >  <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/Hexo/">Hexo</a>
      </span>
     

    <!-- tags -->
    
      <span class="separator"> | </span>
      <span>
        <i class="fa fa-tags" aria-hidden="true"></i>
        <a class="article-tag-none-link" href="/tags/Hexo/" rel="tag">Hexo</a>,<a class="article-tag-none-link" href="/tags/Web/" rel="tag">Web</a>
      </span>
     
</div>
<!-- <div class="tag-bar primary-color">
    
        <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/" rel="tag">Web</a></li></ul>
    
</div> --> 
     
        </div>
    </div>
</div>

<script>
    var leftBackgroundUrl = 'https://i.loli.net/2020/12/09/C79FTYjh31ibdNZ.jpg';
    var homeLeftAsideNode = document.getElementsByClassName('article-header-img')[0];
    if (homeLeftAsideNode) {
      homeLeftAsideNode.style.backgroundImage = 'url(' + leftBackgroundUrl + ')';
    }
</script>
     
<div class="container">
    <div class="row justify-content-between">
        <div class="col-9">
            
            <div class="post-card p-4">
                <div class="article-content">
                    <hr>
<p>Hexo是一个很轻便简洁的博客框架，没有太多的学习难度，如果对于博客功能和样式没有太多要求，几乎只需要安装，学会如何创建和发布博客即可。<br>对于一个程序员来说，当对于下载的主题有定制化需求的时候，总感觉不如直接撸一个属于自己的主题，抱着这种想法，时隔很久之后又重新开始了web的开发。</p>
<h1 id="主题开发"><a href="#主题开发" class="headerlink" title="主题开发"></a>主题开发</h1><h3 id="hexo-目录结构"><a href="#hexo-目录结构" class="headerlink" title="hexo 目录结构"></a>hexo 目录结构</h3><p>在本地的blog目录下运行<code>hexo init</code>之后，hexo会进行初始化，为我们自动生成一些文件和目录。以下为hexo的默认目录结构。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">|-- _config.yml           &#x2F;&#x2F; 博客的总配置文件</span><br><span class="line">|-- package-lock.json     &#x2F;&#x2F; 支持hexo运行的nodejs包</span><br><span class="line">|-- package.json          &#x2F;&#x2F; 自定义的nodejs包</span><br><span class="line">|-- node_modules&#x2F;         &#x2F;&#x2F; nodejs的依赖包，也可以自定义添加插件</span><br><span class="line">|-- scaffolds&#x2F;            &#x2F;&#x2F; 模板文件夹，包含page，post draft三种模板，对应页面，发布的文章和草稿</span><br><span class="line">|-- source&#x2F;               &#x2F;&#x2F; 资源文件夹。用来存放博客的图片，文章以及各种页面文件</span><br><span class="line">|-- themes&#x2F;               &#x2F;&#x2F; 主题文件夹，每个主题都有一个单独的文件夹，默认主题为landscape</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>由于我们在开发过程中需要不断地查看运行效果，所以比较方便的就是直接创建一个新的Blog文件夹，然后让clone自己的主题repo到<code>themes/</code>目录下，接着对根目录下的<code>_config.yml</code>进行修改，把主题替换成<code>themes/</code>下的目录名，从而启用新的主题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https:&#x2F;&#x2F;hexo.io&#x2F;plugins&#x2F;</span><br><span class="line">## Themes: https:&#x2F;&#x2F;hexo.io&#x2F;themes&#x2F;</span><br><span class="line">theme: future</span><br></pre></td></tr></table></figure>
<p>在博客目录下（注意不是主题目录）运行<code>hexo s</code>启动hexo server，通过访问 <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000</a> 可以查看到一个空白的界面，那是因为我们的新主题目录下没有任何内容。</p>
<h3 id="Hexo-主题目录"><a href="#Hexo-主题目录" class="headerlink" title="Hexo 主题目录"></a>Hexo 主题目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;themes&#x2F;future</span><br><span class="line"></span><br><span class="line">|-- _config.yml           &#x2F;&#x2F; 主题的配置文件</span><br><span class="line">|-- languages&#x2F;            &#x2F;&#x2F; 国际化文件夹，支持多语言</span><br><span class="line">|-- layout&#x2F;               &#x2F;&#x2F; 页面配置文件，存放我们的ejs文件</span><br><span class="line">       |-- layout.ejs     &#x2F;&#x2F; 布局文件的总入口，所有页面都是按照其来进行渲染</span><br><span class="line">       |-- index.ejs      &#x2F;&#x2F; 主页的布局文件</span><br><span class="line">       |-- post.ejs       &#x2F;&#x2F; 博客文章详情页的布局文件</span><br><span class="line">|-- source&#x2F;               &#x2F;&#x2F; 主题配置文件，存放css，font，js等文件</span><br></pre></td></tr></table></figure>

<ul>
<li><code>_config.yml</code>不同于根目录下的<code>_config.yml</code>，这是你自己主题的配置文件，是我们提供给用户进行个人博客差异化的配置入口，通过设置不同的配置项来修改主题的布局样式等。下面就是一个主题<code>_config.yml</code>的例子，通过<code>theme.变量名</code>来获取配置信息，如我们可以通过<code>theme.author</code>获取到用户提供的作者信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">author: Yulin Liang(梁煜麟)</span><br><span class="line">description: Make coding more interesting</span><br><span class="line">avatar: https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;12&#x2F;09&#x2F;liWow1fZmFVJEYO.jpg</span><br><span class="line">url: https:&#x2F;&#x2F;yulinliang.com</span><br><span class="line">subtitle: try to make life better</span><br></pre></td></tr></table></figure></li>
<li><code>source/</code>是用来存放资源文件的，我们的stylus，js和font文件都是存放在该目录下的。</li>
<li><code>layout/</code>就是我们ejs的文件夹，所有的布局文件都是存放在其中的。</li>
</ul>
<h3 id="主题开发-1"><a href="#主题开发-1" class="headerlink" title="主题开发"></a>主题开发</h3><p>Hexo支持主流的模板引擎，如：<code>Ejs</code>，<code>Jade</code>，<code>Swing</code>等，同时也支持大量的CSS预处理，如<code>sass</code>， <code>Stylus</code>，<code>Less</code>等。在这里我选择的和默认主题<code>landscape</code>样，<code>ejs</code> + <code>stylus</code>.</p>
<ul>
<li><p>首先我们需要创建<code>layout.ejs</code>, <code>index.ejs</code>,<code>post.ejs</code>三个文件。</p>
</li>
<li><p>前面我们提到<code>layout.ejs</code>是整个博客布局的总入口，这以为着如果我们在<code>layout.ejs</code>中添加了header和footer之后，所有的页面都会存在着header和footer。</p>
</li>
<li><p>所以我们可以在<code>layout.ejs</code>中添加如下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    Hello World</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>启动hexo server之后刷新localhost:4000,我们可以看到hello world已经打印出来了。</p>
</li>
</ul>
<p><img src="https://i.loli.net/2020/12/28/esj4c6kLZlz1Ot3.png" alt="demo"></p>
<ul>
<li><p>接下来我们如何才能让<code>post.ejs</code>和<code>index.ejs</code>得到显示呢？Hexo为我们提供了大量的api接口，其中<code>&lt;%- body %&gt;</code>会引入post.ejs和index.ejs,在首页会自动选择index.ejs进行渲染，而博客正文页面则使用post.ejs。接下来我们修改一下index.ejs和post。</p>
<p>index.ejs</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">这里是index.ejs</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>post.ejs</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">这里是post.ejs</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后再layout.ejs的<body>tag 中调用<code>&lt;%- body %&gt;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    Hello World</span><br><span class="line"></span><br><span class="line">    &lt;%- body %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<p><img src="https://i.loli.net/2020/12/28/4kNTJ9XGu1gYKyd.png" alt="demo2"></p>
<ul>
<li><p>知道了文件的调用之后，我们变可以再对应的文件中添加我们自己的逻辑，但是现在有一个问题，我们如何拿到我们的博客数据呢，如首页的博文列表，每篇博文的创建时间，内容，标题等等。Hexo提供了很多的api来获取这些信息，如在主页时，通过<code>page.posts</code>可以获得当前page的所有博文信息,<code>page.prev_link</code>可以跳转到上一页，可以帮助我们实现翻页逻辑。具体的信息可以查看<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/variables">Hexo官方文档</a></p>
<p>我们现在通过page.posts来获取主页博客列表，将博文标题打印出来：<br>index.ejs</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    &lt;% page.posts.each(function(post, index) &#123; %&gt;       </span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%= post.title %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &lt;%  &#125;) %&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<p><img src="https://i.loli.net/2020/12/28/ExncAgleBq91Nz3.png" alt="demo3"></p>
<p>​    在了解如何获得数据和文件的调用之后，剩下的就是脑洞大开，打造属于自己独特的博客主题了。</p>

                </div>
        
                 
        
                
    <div class="article-navigation">
        
        
            <a href="/2020/12/14/Leetcode-1642-Furthest-Building-You-Can-Reach/" id="article-nav-next" class="article-nav-link-wrap">
                <span class="article-nav-title">Leetcode 1642 Furthest Building You Can Reach</span>
                <!-- <div class="icon-circle-right"></div> -->
            </a>
           
    </div>
  
            </div>
        </div>
        <div class="col-3">
            <div class="container post-card post-toc-container"> 
                
                    <div class="post-toc-wrap" id='toc'>
                        <div class="post-toc">
                            <div class="post-toc-title">
                                <i class="fa fa-list" aria-hidden="true"></i>
                                <span>目录</span>
                            </div>
                            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E5%BC%80%E5%8F%91"><span class="toc-text">主题开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#hexo-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">hexo 目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hexo-%E4%B8%BB%E9%A2%98%E7%9B%AE%E5%BD%95"><span class="toc-text">Hexo 主题目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E5%BC%80%E5%8F%91-1"><span class="toc-text">主题开发</span></a></li></ol></li></ol></li></ol>
                        </div>
                    </div>

                    
<script src="/lib/jquery/jquery-3.5.1.min.js"></script>

                    
<script src="/js/main.js"></script>
  
                    <script>
                        registerPostTOC();
                    </script>

                  
            </div>
        </div>
    </div>
</div>
        </div>

        <div class="container-fluid footer-bg">
    <div class="container">
        <footer class="footer d-flex w-100 justify-content-between align-middle">
            <div class="align-self-center">
                <p class="mb-0">
                   Copyright © 2020
                   <a href="https://yulinliang.com">Yulin Liang(梁煜麟)</a>
                    <span data-bs-toggle="tooltip"
                            data-bs-placement="top" 
                            title="除非另有说明，否则本网站上的博客文章均由作者根据知识共享许可协议 - 署名标示 4.0（CC BY 4.0）进行授权许可。">保留部分权利。
                    </span>
                </p>
            </div>
            <div class="align-self-center">
                <p class="mb-0">
                    本博客由
                    <a href="https://hexo.io/" target="_blank">Hexo</a>
                    生成，使用
                    <a href="https://github.com/yulin-liang/hexo-theme-future" target="_blank">Future</a>
                    作为主题
                </p>
            </div>
        </footer>
    </div>
</div> 
        <a id="back-to-top" class="btn btn-lg btn-box-shadow" href="#" role="button">
            <i class="fa fa-arrow-circle-o-up"></i>
        </a>
    </div>

    <!-- 引入js文件 -->
    
<script src="/lib/jquery/jquery-3.5.1.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/animejs@3.0.1/lib/anime.min.js"></script>
    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
<script src="/lib/prism/prism.js"></script>
 
    
<script src="/js/main.js"></script>
  
</body>
</html>